diff --git a/absl/meta/type_traits.h b/absl/meta/type_traits.h
index 1234567..abcdefg 100644
--- a/absl/meta/type_traits.h
+++ b/absl/meta/type_traits.h
@@ -306,7 +306,8 @@ using underlying_type_t = typename std::underlying_type<T>::type;
 namespace type_traits_internal {
 
 #if (defined(__cpp_lib_is_invocable) && __cpp_lib_is_invocable >= 201703L) || \
-    (defined(_MSVC_LANG) && _MSVC_LANG >= 201703L)
+    (defined(_MSVC_LANG) && _MSVC_LANG >= 201703L) || \
+    (defined(__cplusplus) && __cplusplus >= 201703L)
 // std::result_of is deprecated (C++17) or removed (C++20)
 template <typename>
 struct result_of;
diff --git a/absl/cc_static_library.bzl b/absl/cc_static_library.bzl
index 1234567..abcdefg 100644
--- a/absl/cc_static_library.bzl
+++ b/absl/cc_static_library.bzl
@@ -3,7 +3,10 @@ def _cc_static_library_impl(ctx):
     libraries = []
     for link_input in cc.linking_context.linker_inputs.to_list():
         for library in link_input.libraries:
-            libraries += library.pic_objects
+            # On macOS, the Apple Clang toolchain does not populate pic_objects
+            # (all code is position-independent by default), so fall back to
+            # library.objects when pic_objects is empty.
+            libraries += library.pic_objects if library.pic_objects else library.objects
     args = ["r", ctx.outputs.out.path] + [f.path for f in libraries]
     ctx.actions.run(
         inputs = libraries,
